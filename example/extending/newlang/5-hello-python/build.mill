package build
import mill._

def installPython = Task{
  os.call(("apt", "update"))
  os.call(("apt", "install", "python3"))
  PathRef(Task.dest)
}

def sources = Task.Source(millSourcePath / "app")
def allSources = Task{
  os.walk(sources().path).filter(_.ext == "py").map(PathRef(_))
}

def mainFileName = Task{ "hello.py" }
def run(args: mill.define.Args) = Task.Command{
  os.call(
    ("python3", sources().path / mainFileName(), args.value),
    stdout = os.Inherit
  )
}
